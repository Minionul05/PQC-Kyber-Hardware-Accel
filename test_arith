#! /c/Source/iverilog-install/bin/vvp
:ivl_version "12.0 (devel)" "(s20150603-1539-g2693dd32b)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "D:\Downloads\iverilog\lib\ivl\system.vpi";
:vpi_module "D:\Downloads\iverilog\lib\ivl\vhdl_sys.vpi";
:vpi_module "D:\Downloads\iverilog\lib\ivl\vhdl_textio.vpi";
:vpi_module "D:\Downloads\iverilog\lib\ivl\v2005_math.vpi";
:vpi_module "D:\Downloads\iverilog\lib\ivl\va_math.vpi";
S_00000201cf8964d0 .scope module, "tb_mod_arith" "tb_mod_arith" 2 4;
 .timescale -9 -12;
v00000201cf8f1290_0 .net "res_add", 11 0, L_00000201cf93c2f0;  1 drivers
v00000201cf8f1f10_0 .net "res_mult", 11 0, L_00000201cf93bc10;  1 drivers
v00000201cf8f1650_0 .net "res_sub", 11 0, L_00000201cf93c390;  1 drivers
v00000201cf8f1fb0_0 .var "tb_a", 11 0;
v00000201cf8f1830_0 .var "tb_b", 11 0;
S_00000201cf881f30 .scope module, "dut_add" "mod_add" 2 16, 3 3 0, S_00000201cf8964d0;
 .timescale -9 -12;
    .port_info 0 /INPUT 12 "a";
    .port_info 1 /INPUT 12 "b";
    .port_info 2 /OUTPUT 12 "out";
v00000201cf87c960_0 .net *"_ivl_0", 12 0, L_00000201cf8f20f0;  1 drivers
L_00000201cf8f2988 .functor BUFT 1, C4<0110100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf87d220_0 .net/2u *"_ivl_10", 12 0, L_00000201cf8f2988;  1 drivers
L_00000201cf8f29d0 .functor BUFT 1, C4<0110100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf87caa0_0 .net/2u *"_ivl_14", 12 0, L_00000201cf8f29d0;  1 drivers
v00000201cf87cb40_0 .net *"_ivl_16", 0 0, L_00000201cf8f25f0;  1 drivers
v00000201cf87cc80_0 .net *"_ivl_19", 11 0, L_00000201cf8f0930;  1 drivers
v00000201cf87d2c0_0 .net *"_ivl_21", 11 0, L_00000201cf8f09d0;  1 drivers
L_00000201cf8f28f8 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v00000201cf87cdc0_0 .net *"_ivl_3", 0 0, L_00000201cf8f28f8;  1 drivers
v00000201cf87d360_0 .net *"_ivl_4", 12 0, L_00000201cf8f22d0;  1 drivers
L_00000201cf8f2940 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v00000201cf87ce60_0 .net *"_ivl_7", 0 0, L_00000201cf8f2940;  1 drivers
v00000201cf87d400_0 .net "a", 11 0, v00000201cf8f1fb0_0;  1 drivers
v00000201cf87d4a0_0 .net "b", 11 0, v00000201cf8f1830_0;  1 drivers
v00000201cf87d540_0 .net "out", 11 0, L_00000201cf93c2f0;  alias, 1 drivers
v00000201cf87d5e0_0 .net "sum_raw", 12 0, L_00000201cf8f2370;  1 drivers
v00000201cf87d680_0 .net "sum_sub_q", 12 0, L_00000201cf8f2550;  1 drivers
L_00000201cf8f20f0 .concat [ 12 1 0 0], v00000201cf8f1fb0_0, L_00000201cf8f28f8;
L_00000201cf8f22d0 .concat [ 12 1 0 0], v00000201cf8f1830_0, L_00000201cf8f2940;
L_00000201cf8f2370 .arith/sum 13, L_00000201cf8f20f0, L_00000201cf8f22d0;
L_00000201cf8f2550 .arith/sub 13, L_00000201cf8f2370, L_00000201cf8f2988;
L_00000201cf8f25f0 .cmp/ge 13, L_00000201cf8f2370, L_00000201cf8f29d0;
L_00000201cf8f0930 .part L_00000201cf8f2550, 0, 12;
L_00000201cf8f09d0 .part L_00000201cf8f2370, 0, 12;
L_00000201cf93c2f0 .functor MUXZ 12, L_00000201cf8f09d0, L_00000201cf8f0930, L_00000201cf8f25f0, C4<>;
S_00000201cf896e10 .scope module, "dut_mult" "montgomery_mult" 2 18, 4 3 0, S_00000201cf8964d0;
 .timescale -9 -12;
    .port_info 0 /INPUT 12 "a";
    .port_info 1 /INPUT 12 "b";
    .port_info 2 /OUTPUT 12 "out";
P_00000201cf88e640 .param/l "QINV" 1 4 11, C4<1111001100000001>;
v00000201cf87c820_0 .net/s *"_ivl_0", 23 0, L_00000201cf93b670;  1 drivers
v00000201cf8f18d0_0 .net/s *"_ivl_12", 27 0, L_00000201cf93bb70;  1 drivers
v00000201cf8f10b0_0 .net/s *"_ivl_14", 27 0, L_00000201cf93bd50;  1 drivers
L_00000201cf8f2bc8 .functor BUFT 1, C4<1111111111111111110100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf8f1970_0 .net/2s *"_ivl_16", 27 0, L_00000201cf8f2bc8;  1 drivers
v00000201cf8f0bb0_0 .net/s *"_ivl_19", 27 0, L_00000201cf93c570;  1 drivers
v00000201cf8f1a10_0 .net/s *"_ivl_2", 23 0, L_00000201cf93b030;  1 drivers
v00000201cf8f2050_0 .net/s *"_ivl_20", 27 0, L_00000201cf93c610;  1 drivers
v00000201cf8f0e30_0 .net *"_ivl_24", 11 0, L_00000201cf93c6b0;  1 drivers
L_00000201cf8f2c10 .functor BUFT 1, C4<1111111111111111110100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf8f13d0_0 .net/2s *"_ivl_28", 27 0, L_00000201cf8f2c10;  1 drivers
v00000201cf8f1510_0 .net *"_ivl_30", 0 0, L_00000201cf93ab30;  1 drivers
L_00000201cf8f2c58 .functor BUFT 1, C4<110100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf8f1330_0 .net/2u *"_ivl_32", 11 0, L_00000201cf8f2c58;  1 drivers
v00000201cf8f0a70_0 .net *"_ivl_34", 11 0, L_00000201cf93c070;  1 drivers
v00000201cf8f1d30_0 .net *"_ivl_7", 15 0, L_00000201cf93bad0;  1 drivers
L_00000201cf8f2b80 .functor BUFT 1, C4<1111001100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf8f0ed0_0 .net/2u *"_ivl_8", 15 0, L_00000201cf8f2b80;  1 drivers
v00000201cf8f11f0_0 .net "a", 11 0, v00000201cf8f1fb0_0;  alias, 1 drivers
v00000201cf8f1790_0 .net "b", 11 0, v00000201cf8f1830_0;  alias, 1 drivers
v00000201cf8f2410_0 .net/s "m", 15 0, L_00000201cf93b710;  1 drivers
v00000201cf8f2190_0 .net "out", 11 0, L_00000201cf93bc10;  alias, 1 drivers
v00000201cf8f15b0_0 .net/s "prod", 23 0, L_00000201cf93c430;  1 drivers
v00000201cf8f1ab0_0 .net/s "res_raw", 11 0, L_00000201cf93abd0;  1 drivers
v00000201cf8f0b10_0 .net/s "t", 27 0, L_00000201cf93c7f0;  1 drivers
L_00000201cf93b670 .extend/s 24, v00000201cf8f1fb0_0;
L_00000201cf93b030 .extend/s 24, v00000201cf8f1830_0;
L_00000201cf93c430 .arith/mult 24, L_00000201cf93b670, L_00000201cf93b030;
L_00000201cf93bad0 .part L_00000201cf93c430, 0, 16;
L_00000201cf93b710 .arith/mult 16, L_00000201cf93bad0, L_00000201cf8f2b80;
L_00000201cf93bb70 .extend/s 28, L_00000201cf93c430;
L_00000201cf93bd50 .extend/s 28, L_00000201cf93b710;
L_00000201cf93c570 .arith/mult 28, L_00000201cf93bd50, L_00000201cf8f2bc8;
L_00000201cf93c610 .arith/sum 28, L_00000201cf93bb70, L_00000201cf93c570;
L_00000201cf93c6b0 .part L_00000201cf93c610, 16, 12;
L_00000201cf93c7f0 .extend/s 28, L_00000201cf93c6b0;
L_00000201cf93abd0 .part L_00000201cf93c7f0, 0, 12;
L_00000201cf93ab30 .cmp/ge.s 28, L_00000201cf93c7f0, L_00000201cf8f2c10;
L_00000201cf93c070 .arith/sub 12, L_00000201cf93abd0, L_00000201cf8f2c58;
L_00000201cf93bc10 .functor MUXZ 12, L_00000201cf93abd0, L_00000201cf93c070, L_00000201cf93ab30, C4<>;
S_00000201cf897770 .scope module, "dut_sub" "mod_sub" 2 17, 5 3 0, S_00000201cf8964d0;
 .timescale -9 -12;
    .port_info 0 /INPUT 12 "a";
    .port_info 1 /INPUT 12 "b";
    .port_info 2 /OUTPUT 12 "out";
v00000201cf8f27d0_0 .net *"_ivl_0", 12 0, L_00000201cf93b3f0;  1 drivers
v00000201cf8f0d90_0 .net *"_ivl_10", 12 0, L_00000201cf93ba30;  1 drivers
L_00000201cf8f2aa8 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v00000201cf8f1b50_0 .net *"_ivl_13", 0 0, L_00000201cf8f2aa8;  1 drivers
L_00000201cf8f2af0 .functor BUFT 1, C4<0110100000001>, C4<0>, C4<0>, C4<0>;
v00000201cf8f1bf0_0 .net/2u *"_ivl_14", 12 0, L_00000201cf8f2af0;  1 drivers
v00000201cf8f2230_0 .net *"_ivl_16", 12 0, L_00000201cf93b8f0;  1 drivers
v00000201cf8f24b0_0 .net *"_ivl_18", 12 0, L_00000201cf93b490;  1 drivers
L_00000201cf8f2b38 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v00000201cf8f16f0_0 .net *"_ivl_21", 0 0, L_00000201cf8f2b38;  1 drivers
v00000201cf8f2730_0 .net *"_ivl_24", 0 0, L_00000201cf93b990;  1 drivers
v00000201cf8f0c50_0 .net *"_ivl_27", 11 0, L_00000201cf93c250;  1 drivers
v00000201cf8f2690_0 .net *"_ivl_29", 11 0, L_00000201cf93c4d0;  1 drivers
L_00000201cf8f2a18 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v00000201cf8f0f70_0 .net *"_ivl_3", 0 0, L_00000201cf8f2a18;  1 drivers
v00000201cf8f0cf0_0 .net *"_ivl_4", 12 0, L_00000201cf93b7b0;  1 drivers
L_00000201cf8f2a60 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v00000201cf8f1c90_0 .net *"_ivl_7", 0 0, L_00000201cf8f2a60;  1 drivers
v00000201cf8f1470_0 .net "a", 11 0, v00000201cf8f1fb0_0;  alias, 1 drivers
v00000201cf8f1dd0_0 .net "b", 11 0, v00000201cf8f1830_0;  alias, 1 drivers
v00000201cf8f1e70_0 .net "diff_add_q", 12 0, L_00000201cf93b5d0;  1 drivers
v00000201cf8f1010_0 .net "diff_raw", 12 0, L_00000201cf93c1b0;  1 drivers
v00000201cf8f1150_0 .net "out", 11 0, L_00000201cf93c390;  alias, 1 drivers
L_00000201cf93b3f0 .concat [ 12 1 0 0], v00000201cf8f1fb0_0, L_00000201cf8f2a18;
L_00000201cf93b7b0 .concat [ 12 1 0 0], v00000201cf8f1830_0, L_00000201cf8f2a60;
L_00000201cf93c1b0 .arith/sub 13, L_00000201cf93b3f0, L_00000201cf93b7b0;
L_00000201cf93ba30 .concat [ 12 1 0 0], v00000201cf8f1fb0_0, L_00000201cf8f2aa8;
L_00000201cf93b8f0 .arith/sum 13, L_00000201cf93ba30, L_00000201cf8f2af0;
L_00000201cf93b490 .concat [ 12 1 0 0], v00000201cf8f1830_0, L_00000201cf8f2b38;
L_00000201cf93b5d0 .arith/sub 13, L_00000201cf93b8f0, L_00000201cf93b490;
L_00000201cf93b990 .cmp/ge 12, v00000201cf8f1fb0_0, v00000201cf8f1830_0;
L_00000201cf93c250 .part L_00000201cf93c1b0, 0, 12;
L_00000201cf93c4d0 .part L_00000201cf93b5d0, 0, 12;
L_00000201cf93c390 .functor MUXZ 12, L_00000201cf93c4d0, L_00000201cf93c250, L_00000201cf93b990, C4<>;
    .scope S_00000201cf8964d0;
T_0 ;
    %vpi_call 2 22 "$dumpfile", "arith_test.vcd" {0 0 0};
    %vpi_call 2 23 "$dumpvars", 32'sb00000000000000000000000000000000, S_00000201cf8964d0 {0 0 0};
    %vpi_call 2 25 "$display", "=== Start Test Aritmetica Modulara (Kyber q=3329) ===" {0 0 0};
    %pushi/vec4 100, 0, 12;
    %store/vec4 v00000201cf8f1fb0_0, 0, 12;
    %pushi/vec4 200, 0, 12;
    %store/vec4 v00000201cf8f1830_0, 0, 12;
    %delay 10000, 0;
    %load/vec4 v00000201cf8f1290_0;
    %pad/u 32;
    %cmpi/ne 300, 0, 32;
    %jmp/0xz  T_0.0, 6;
    %vpi_call 2 30 "$display", "[FAIL] Add: 100+200=%d (Expected 300)", v00000201cf8f1290_0 {0 0 0};
    %jmp T_0.1;
T_0.0 ;
    %vpi_call 2 31 "$display", "[PASS] Add: 100+200=%d", v00000201cf8f1290_0 {0 0 0};
T_0.1 ;
    %pushi/vec4 3300, 0, 12;
    %store/vec4 v00000201cf8f1fb0_0, 0, 12;
    %pushi/vec4 100, 0, 12;
    %store/vec4 v00000201cf8f1830_0, 0, 12;
    %delay 10000, 0;
    %load/vec4 v00000201cf8f1290_0;
    %pad/u 32;
    %cmpi/ne 71, 0, 32;
    %jmp/0xz  T_0.2, 6;
    %vpi_call 2 37 "$display", "[FAIL] Add: 3300+100=%d (Expected 71)", v00000201cf8f1290_0 {0 0 0};
    %jmp T_0.3;
T_0.2 ;
    %vpi_call 2 38 "$display", "[PASS] Add: 3300+100=%d", v00000201cf8f1290_0 {0 0 0};
T_0.3 ;
    %pushi/vec4 500, 0, 12;
    %store/vec4 v00000201cf8f1fb0_0, 0, 12;
    %pushi/vec4 200, 0, 12;
    %store/vec4 v00000201cf8f1830_0, 0, 12;
    %delay 10000, 0;
    %load/vec4 v00000201cf8f1650_0;
    %pad/u 32;
    %cmpi/ne 300, 0, 32;
    %jmp/0xz  T_0.4, 6;
    %vpi_call 2 43 "$display", "[FAIL] Sub: 500-200=%d (Expected 300)", v00000201cf8f1650_0 {0 0 0};
    %jmp T_0.5;
T_0.4 ;
    %vpi_call 2 44 "$display", "[PASS] Sub: 500-200=%d", v00000201cf8f1650_0 {0 0 0};
T_0.5 ;
    %pushi/vec4 100, 0, 12;
    %store/vec4 v00000201cf8f1fb0_0, 0, 12;
    %pushi/vec4 200, 0, 12;
    %store/vec4 v00000201cf8f1830_0, 0, 12;
    %delay 10000, 0;
    %load/vec4 v00000201cf8f1650_0;
    %pad/u 32;
    %cmpi/ne 3229, 0, 32;
    %jmp/0xz  T_0.6, 6;
    %vpi_call 2 50 "$display", "[FAIL] Sub: 100-200=%d (Expected 3229)", v00000201cf8f1650_0 {0 0 0};
    %jmp T_0.7;
T_0.6 ;
    %vpi_call 2 51 "$display", "[PASS] Sub: 100-200=%d", v00000201cf8f1650_0 {0 0 0};
T_0.7 ;
    %pushi/vec4 20, 0, 12;
    %store/vec4 v00000201cf8f1fb0_0, 0, 12;
    %pushi/vec4 30, 0, 12;
    %store/vec4 v00000201cf8f1830_0, 0, 12;
    %delay 10000, 0;
    %vpi_call 2 59 "$display", "[INFO] Mult Montgomery: input 20, 30 -> output %d (Check logic later)", v00000201cf8f1f10_0 {0 0 0};
    %vpi_call 2 61 "$display", "=== Test Finalizat ===" {0 0 0};
    %vpi_call 2 62 "$finish" {0 0 0};
    %end;
    .thread T_0;
# The file index is used to find the file name in the following table.
:file_names 6;
    "N/A";
    "<interactive>";
    "tb/tb_mod_arith.v";
    "rtl/arithmetic/mod_add.v";
    "rtl/arithmetic/montgomery_mult.v";
    "rtl/arithmetic/mod_sub.v";
